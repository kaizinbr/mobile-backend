generator client {
    provider = "prisma-client"
    output   = "../lib/generated/prisma"
}

datasource db {
    provider = "postgresql"
}

model Comment {
    id         BigInt    @id(map: "comments_pkey") @default(autoincrement())
    userId     String?   @db.Uuid
    rating     Int
    comment    String
    created_at DateTime? @default(now()) @db.Timestamptz(6)
}

model Follow {
    created_at                          DateTime? @default(now()) @db.Timestamptz(6)
    followed_id                         String    @db.Uuid
    follower_id                         String    @db.Uuid
    id                                  String    @id(map: "follows_pkey") @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    Profile_Follow_followed_idToProfile Profile   @relation("Follow_followed_idToProfile", fields: [followed_id], references: [id], onDelete: Cascade)
    Profile_Follow_follower_idToProfile Profile   @relation("Follow_follower_idToProfile", fields: [follower_id], references: [id], onDelete: Cascade)

    @@unique([follower_id, followed_id])
}

model Like {
    id           BigInt   @id(map: "likes_pkey") @default(autoincrement())
    userId       String?  @db.Uuid
    ratingId     String?  @db.Uuid
    inserted_at  DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
    updated_at   DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
    user_profile String?  @db.Uuid
    Rating       Rating?  @relation(fields: [ratingId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "likes_ratingId_fkey")
    Profile      Profile? @relation(fields: [user_profile], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "likes_user_profile_fkey")
}

model Notification {
    id                                      String    @id(map: "notifications_pkey") @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    ratingId                                String?   @db.Uuid
    type                                    String?
    seen                                    Boolean?  @default(false)
    created_at                              DateTime? @default(dbgenerated("(now() AT TIME ZONE 'utc'::text)")) @db.Timestamptz(6)
    sender_id                               String?   @db.Uuid
    user_id                                 String?   @db.Uuid
    Rating                                  Rating?   @relation(fields: [ratingId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "notifications_ratingId_fkey")
    Profile_Notification_sender_idToProfile Profile?  @relation("Notification_sender_idToProfile", fields: [sender_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "notifications_senderId_fkey")
    Profile_Notification_user_idToProfile   Profile?  @relation("Notification_user_idToProfile", fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "notifications_userId_fkey")
}

model Profile {
    id                                           String         @id(map: "profiles_pkey") @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    username                                     String?        @default(dbgenerated("gen_random_uuid()"))
    name                                         String?
    lowername                                    String?
    bio                                          String?
    pronouns                                     String?
    site                                         String?
    color                                        String?        @default("#cb160f")
    created_at                                   DateTime       @default(now()) @db.Timestamptz(6)
    public                                       Boolean        @default(false)
    favorites                                    Json           @default("[{\"albuns\": [], \"artists\": []}]")
    verified                                     Boolean        @default(false)
    avatar_url                                   String?        @default("b62ffbe8-65b6-4c0f-85c3-8ddb41c1c1b2-0.9841619793258353.jpg")
    albuns                                       Json           @default("[]")
    artists                                      Json           @default("[]")
    location                                     String?
    Follow_Follow_followed_idToProfile           Follow[]       @relation("Follow_followed_idToProfile")
    Follow_Follow_follower_idToProfile           Follow[]       @relation("Follow_follower_idToProfile")
    Like                                         Like[]
    Notification_Notification_sender_idToProfile Notification[] @relation("Notification_sender_idToProfile")
    Notification_Notification_user_idToProfile   Notification[] @relation("Notification_user_idToProfile")
    User                                         User           @relation(fields: [id], references: [id], onDelete: Cascade, onUpdate: NoAction)
    Rating                                       Rating[]
}

model Rating {
    id           String         @id(map: "ratings_pkey") @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    ratings      Json?
    review       String?        @db.VarChar
    total        Decimal        @default(0) @db.Decimal
    shorten      String?        @unique(map: "ratings_shorten_key")
    content      Json           @default("{\"type\": \"doc\", \"content\": [{\"type\": \"paragraph\", \"content\": [{\"text\": \"\", \"type\": \"text\"}]}]}")
    published    Boolean        @default(false)
    created_at   DateTime       @default(dbgenerated("(now() AT TIME ZONE 'utc'::text)")) @db.Timestamptz(6)
    updated_at   DateTime       @default(dbgenerated("(now() AT TIME ZONE 'utc'::text)")) @db.Timestamptz(6)
    album_id     String?        @db.VarChar
    user_id      String?        @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    Like         Like[]
    Notification Notification[]
    Profile      Profile?       @relation(fields: [user_id], references: [id], onDelete: Cascade, map: "ratings_userId_fkey")
}

model TokenOTP {
    id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    token      String    @unique
    created_at DateTime? @db.Timestamp(6)
    expires    DateTime  @db.Timestamp(6)
    identifier String    @unique
}

model VerificationToken {
    id         String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    identifier String
    token      String
    expires    DateTime @db.Timestamp(6)
    action     String?
}

model playing_with_neon {
    id    Int     @id @default(autoincrement())
    name  String
    value Float?  @db.Real
    teste String?
}

model temp_users_import {
    id                 String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    name               String?
    email              String?   @unique
    email_verified     DateTime?
    image              String?
    created_at         DateTime? @db.Timestamptz(6)
    encrypted_password String?   @db.VarChar(255)
}

model Account {
    user_id             String  @db.Uuid
    type                String?
    provider            String  @map("providerId")
    provider_account_id String
    refresh_token       String?
    access_token        String?
    expires_at          Int?
    token_type          String?
    scope               String?
    id_token            String?
    session_state       String?
    id                  String  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    User                User    @relation(fields: [user_id], references: [id], onDelete: Cascade)

    @@unique([provider, provider_account_id])
    @@index([user_id])
}

model BA_Account {
    id                    String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    userId                String    @db.Uuid
    accountId             String
    providerId            String
    accessToken           String?
    refreshToken          String?
    idToken               String?
    accessTokenExpiresAt  DateTime?
    refreshTokenExpiresAt DateTime?
    password              String?
    createdAt             DateTime  @default(now())
    updatedAt             DateTime  @updatedAt

    @@unique([providerId])
    @@index([userId])
    @@map("ba_account")
}

model Session {
    id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    userId    String   @db.Uuid
    token     String   @unique
    expiresAt DateTime
    ipAddress String?
    userAgent String?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    User User @relation(fields: [userId], references: [id])

    @@index([userId])
    @@map("session")
}

model User {
    id                  String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    name                String?
    email               String?   @unique
    email_verified_when DateTime?
    image               String?
    createdAt           DateTime  @default(now()) @map("created_at") @db.Timestamptz(6)
    updatedAt           DateTime  @default(now()) @map("updated_at") @db.Timestamptz(6)
    encrypted_password  String?   @db.VarChar(255)
    emailVerified       Boolean?  @map("email_verified")
    //   Account             Account[]
    Profile             Profile?
    //   Session             Session[]
    sessions            Session[]
    accounts            Account[]
}

model Verification {
    id         String   @id @default(dbgenerated("pg_catalog.gen_random_uuid()")) @db.Uuid
    identifier String
    value      String
    expiresAt  DateTime
    createdAt  DateTime @default(now())
    updatedAt  DateTime @updatedAt

    @@index([identifier])
    @@map("verification")
}
